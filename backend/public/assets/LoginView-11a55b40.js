import{_ as h,u as S,a as x,b as N,r as m,o as A,c as E,d,e as u,f as s,g as L,w as B,h as c,n as g,i as a,t as _,j as p,k as w,s as C,l as f,m as z}from"./index-0b450a74.js";import{_ as D}from"./logo1-b9c562a1.js";import{u as M,s as F,r as V,e as R}from"./password.esm-cc7ea422.js";const T={class:"login-bg-new"},U={class:"login-card-new"},j={class:"field-new"},q={key:0,class:"p-error"},I={class:"field-new"},G={key:0,class:"p-error"},H={key:0,class:"custom-spinner"},J={class:"register-link-new"},K={__name:"LoginView",setup(O){const b=S(),y=x(),v=N(),t=m(""),i=m(""),r=m(!1),o=M({emailValue:{required:V,email:R},password:{required:V}},{emailValue:t,password:i}),k=async()=>{var e,n;if(await o.value.$validate()){r.value=!0;try{await y.login({email:t.value,senha_hash:i.value}),v.add({severity:"success",summary:"Sucesso",detail:"Login realizado com sucesso!",life:3e3}),b.push("/")}catch(l){v.add({severity:"error",summary:"Erro",detail:((n=(e=l.response)==null?void 0:e.data)==null?void 0:n.error)||"Erro ao realizar login",life:3e3})}finally{r.value=!1}}};return A(()=>{document.title="Abastece Fácil"}),($,e)=>{const n=E("router-link");return d(),u("div",T,[s("div",U,[e[7]||(e[7]=L('<div class="login-logo-new no-bg" data-v-81c75591><img src="'+D+'" alt="Logo App Abastecimento" class="logo-img" data-v-81c75591></div><div class="login-title-block" data-v-81c75591><div class="login-title-new" data-v-81c75591>Bem-vindo ao,</div><div class="app-name-login" data-v-81c75591>Abastece Fácil</div></div>',2)),s("form",{onSubmit:B(k,["prevent"]),class:"login-form-new"},[s("div",j,[e[2]||(e[2]=s("label",{for:"email"},"Email",-1)),c(a(C),{id:"email",modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value=l),type:"email",class:g(["login-input-new",{"p-invalid":a(o).emailValue.$error}]),placeholder:"Digite seu email",autocomplete:"username"},null,8,["modelValue","class"]),a(o).emailValue.$error?(d(),u("small",q,_(a(o).emailValue.$errors[0].$message),1)):p("",!0)]),s("div",I,[e[3]||(e[3]=s("label",{for:"password"},"Senha",-1)),c(a(F),{id:"password",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),class:g(["w-full",{"p-invalid":a(o).password.$error}]),"input-class":"login-input-new",feedback:!1,toggleMask:"",placeholder:"Digite sua senha",autocomplete:"current-password"},null,8,["modelValue","class"]),a(o).password.$error?(d(),u("small",G,_(a(o).password.$errors[0].$message),1)):p("",!0)]),c(a(z),{type:"submit",class:"login-btn-new app-btn-main",loading:r.value},{default:w(()=>[e[5]||(e[5]=f(" Entrar ")),r.value?(d(),u("span",H,e[4]||(e[4]=[s("i",{class:"pi pi-spin pi-spinner"},null,-1)]))):p("",!0)]),_:1},8,["loading"]),s("div",J,[c(n,{to:"/register"},{default:w(()=>e[6]||(e[6]=[f("Não tem uma conta? "),s("b",null,"Registre-se",-1)])),_:1,__:[6]})])],32)])])}}},Y=h(K,[["__scopeId","data-v-81c75591"]]);export{Y as default};
